doctype html
html
    head
        title Moe's Bar
        block header
            meta(charset='utf-8')
            meta(name="viewport" content="width=device-width, initial-scale=1")
            link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
            script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')
            script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js')
            link(rel='stylesheet', type='text/css', href='css/style.css')
    body
        .background-image
        block index
            nav.navbar.navbar-inverse
                .container-fluid
                    ul.nav.navbar-nav
                        li
                            a(href='/') Home
                    ul.nav.navbar-nav.navbar-right
                        if !user
                            li
                                a(href='/register')
                                    span.glyphicon.glyphicon-user
                                    |   Sign Up
                            li
                                a(href='/login') 
                                    span.glyphicon.glyphicon-log-in
                                    |   Login
                        else 
                            li
                                a(href='/logout') Logout
                            if user.moderator
                                li
                                    a(href='/edit') Edit
                        li.dropdown
                            a.dropdown-toggle(data-toggle='dropdown', href='#')
                                | Cart
                                if cart 
                                    span (#{Object.keys(cart).length})
                                else 
                                    span (0)
                                span.caret
                            ul.dropdown-menu
                                - for (var item in cart)
                                    li 
                                        a(href='#') #{cart[item].name} (#{cart[item].count})
                                li.divider
                                li
                                    a(href='/jquery/clearCart') Clear
                                li
                                    a(href='/myCart') Checkout
        //- .embed-responsive.embed-responsive-4by3
        //-     img(src='/images/display.jpg')
        .col-sm-12
            if message
                h3 Error: <em>#{message}</em>
            br
            block content
            br
            block footer
                .footer
                    h2 Contact Us
                    p +3132123456
        script.
            $(document).ready(function() {
                
                /*Cart Function*/
                
                /*Add*/
                $('button.add').click(function() {
                    let entryId = $(this).attr('alt');
                    let count = $(`input#${entryId}`).val();
                    
                    $.get('/jquery/add', { input: entryId, count: count }, function(data){
                        return;
                    });
                    
                });
                
                /*Reduce*/
                $('button.reduce').click(function() {
                   let entryId = $(this).attr('alt')
                   $('tbody tr').each(function(row,tr){
                      let form = {
                         id: $(tr).find('button.close').attr('alt'),
                         name: $(tr).find('td:eq(0)').text().toLowerCase(),
                         body: $(tr).find('p.text-primary').text()
                      }
                      let content = $(this);
                      if(rowId == form.id){
                         content.hide(300);
                         $.get('/deleted', { input: rowId }, function(data){
                             console.log(data)
                            return;
                         });
                      }
                   });
                });
                
            })
